Potrzebny jest modu³ s³u¿¹cy do komunikacji na znaczne odleg³oœci. Zdecydowano siê na u¿ycie modu³u XBee. Topologi¹ sieci po³¹czeñ mo¿e byæ siatka (lub siatka czêœciowa). Modu³ mo¿na skonfigurowaæ do pracy równie¿ w topologiach $P2P$ (Peer To Peer), $PPP$ (Point To Point Protocol) lub $P2MP$ (Point To Multipoint). Zaimplementowany protokó³ ZigBee pozwala modu³owi komunikowaæ siê z innymi modu³ami korzystaj¹cymi z tego samego protoko³u, nawet innych producentów. Maksymalny zasiêg, przy braku przeszkód, wynosi 1,2 km. Istnieje dro¿sza wersja modu³u - XBee PRO, któr¹ cechuje zasiêg 3,2 km. Modu³ XBee mo¿e byæ obs³ugiwany przez mikrokontroler przy u¿yciu $SPI$ (\hyperref[sec:sub:spi]{Sekcja~\ref*{sec:sub:spi}: Serial Peripheral Interface}) lub modu³u $UART$ (\hyperref[sec:sub:uart]{Sekcji~\ref*{sec:sub:uart}: Universal Asynchronous Receiver and Transmitter})~\cite{manual:xbee}.

\subsection{Universal Asynchronous Receiver and Transmitter} \label{sec:sub:uart}
Jedn¹ z mo¿liwoœci obs³ugi modu³u XBee jest u¿ycie modu³u Universal Asynchronous Receiver and Transmitter ($UART$). Komunikacja jest dwukierunkowa (full duplex), szeregowa i asynchroniczna. W warstwie fizycznej to przede wszystkim dwie linie danych:
\begin{itemize}
\item $DIN$ - Data In
\item $DOUT$ - Data Out
\end{itemize}

Gdy nie odbywa siê transmisja, linie powinny byæ podci¹gniête do zasilania. Na \hyperref[fig:uart]{Rysunku~\ref*{fig:uart}} przedstawiono przyk³adowy przesy³ wartoœci 0x1F (0b00011111) przy wykorzystaniu komunikacji szeregowej.

\begin{figure}[h]
\centering \includegraphics[width=0.75\textwidth]{figures/uart.JPG}
\caption{Pakiet danych wysy³any przez modu³ $UART$~\cite{manual:xbee}}\label{fig:uart}
\end{figure}

Przed rozpoczêciem transmisji nale¿y zdefiniowaæ jej prêdkoœæ, gdy¿ komunikacja jest asynchroniczna. Prêdkoœæ charakteryzuje parametr $Baudrate$, czyli iloœæ zmian sygna³u podczas jednej sekundy. Dodatkowo nale¿y ustawiæ  parzystoœæ przesy³anych bitów oraz iloœæ bitów stopu, które koñcz¹ przesy³anie pojedynczej ramki. Transmisja rozpoczyna siê od najm³odszego bitu. Bit parzystoœci, je¿eli zosta³ zdefiniowany, dodawany jest na koñcu ramki przed bitem stopu.\\

\subsection{Tryby pracy modu³u XBee} \label{sec:sub:tryby}
Modu³ XBee zawiera dwa bufory do komunikacji szeregowej: nadawczy oraz odbiorczy. W zale¿noœci od trybu dzia³ania, modu³ mo¿e gromadziæ w buforach dane, czekaj¹c na gotowoœæ do wys³ania wiadomoœci lub przesy³aæ je bezpoœrednio dalej. Do wskazywania przepe³nienia bufora odbiorczego s³u¿y pin $CTS$ (Clear To Send data). Dodatkowym pinem sygnalizacyjnym jest pin $RTS$ (Request To Send data), który wskazuje czy mo¿na rozpocz¹æ przesy³anie kolejnej wiadomoœci. Dobr¹ praktyk¹ jest ³¹czenie pinu $RTS$ nadawcy z pinem $CTS$ odbiorcy~\cite{manual:xbee}.\\

Modu³ mo¿e dzia³aæ w dwóch trybach przetwarzania informacji:
\begin{itemize}
\item transparentny, który sprawia, ¿e modu³ dzia³a jako konwerter szeregowej linii danych wprost na sygna³ radiowy. Wys³anie danych z bufora odbiorczego nastêpuje po up³ywie z góry ustalonego interwa³u czasowego, w którym nie odebrano ¿adnej informacji, przy nades³aniu specjalnej sekwencji znaków lub przy przepe³nieniu bufora odbiorczego. Ten tryb dostêpny jest tylko w komunikacji poprzez $UART$. Tryb obs³uguje tak¿e ramki komend (AT Commands), ale trzeba najpierw wymusiæ tryb ich odbioru.
\item $API$ (Aplication Programming Interface), który rozbudowuje ramkê odbiorcz¹ i nadawcz¹ o dodatkowe pola kontrolne. Dziêki temu trybowi mo¿na konfigurowaæ zdalnie modu³y w sieci  u¿ywaj¹c zestawu komend do³¹czonych w nocie katalogowej~\cite{manual:xbee}. U³atwia on te¿ adresowanie w przypadku dzia³ania w topologii $P2MP$ lub siatki, przy wielu odbiorcach wiadomoœci. W ramce zawarta jest równie¿ informacja o adresie nadawcy. 
\end{itemize}

\subsection{ZigBee}\label{sec:sub:zigbee}
ZigBee jest otwartym standardem opisanym na normie IEEE 802.15.4~\cite{ieee}, która opisuje warstwê fizyczn¹ (topologia siatki, $P2P$, $PPP$ lub $P2MP$) oraz dostêpu do medium. Jest to standard maj¹cy na celu stworzenie alternatywy dla sieci Bluetooth oraz WiFi celuj¹c w aplikacje o niskim poborze mocy, wysokim standardzie bezpieczeñstwa oraz mniejszej przepustowoœci. Prêdkoœæ przesy³u danych to maksymalnie 250 kb/s. Komunikacja szyfrowana jest 128-bitowym kluczem synchronicznym. Adres w sieci ma 16 bitów, co zapewnia obs³ugê ponad 65,5 tysi¹ca urz¹dzeñ (w przeciwieñstwie do sieci Bluetooth, mog¹cej obs³u¿yæ tylko 8). Wyró¿nia siê kilka czêstotliwoœci fal radiowych, miêdzy innymi 2,4 GHz - wspó³dzielona z Bluetooth i WiFi (najszybsza prêdkoœæ przesy³u), 868 MHz - u¿ywana popularnie w Europie, umo¿liwiaj¹ca komunikacjê z prêdkoœci¹ 20 kb/s~\cite{manual:xbee}\cite{manual:zigbee}.